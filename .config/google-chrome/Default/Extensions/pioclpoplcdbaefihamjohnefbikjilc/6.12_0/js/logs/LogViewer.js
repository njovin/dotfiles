/*! Copyright 2009-2017 Evernote Corporation. All rights reserved. */

function LogViewer(){"use strict";function a(){b(),c()}function b(){for(var a=m.getLogsProperties(["name"]),b=0;b<a.length;b++){var c=document.createElement("option");c.value=a[b].name,c.textContent=a[b].name,document.getElementById(i).appendChild(c)}}function c(){var a=document.getElementById(i).selectedIndex;a!=-1&&m.getLog(a,f)}function d(){l&&(clearInterval(l),l=0),this.checked&&(l=setInterval(c,2e3))}function e(){scroll(0,document.body.offsetHeight)}function f(a){var b=document.createElement("pre");b.textContent=a,document.getElementById(k).innerHTML="",document.getElementById(k).appendChild(b),document.getElementById(j).checked&&e()}function g(){m.startExportLogs(h)}function h(a){var b=document.createElement("a"),c=window.URL;b.href=c.createObjectURL(new Blob([a])),b.download="evernote_web_clipper_logs.txt",b.click()}var i="logSelector",j="logFollow",k="logViewer";GlobalUtils.localize(document.body),GlobalUtils.localize(document.getElementsByTagName("title")[0]);var l=0;document.getElementById(i).addEventListener("change",c),document.getElementById(j).addEventListener("change",d),SAFARI||EDGE||FIREFOX?document.getElementById("exportButton").style.display="none":document.getElementById("exportButton").addEventListener("click",g);var m;SAFARI||EDGE||FIREFOX?(m=new LocalStorageLogReader,a()):m=new LogReader(/type=([^&$]+)/.test(location.hash)?/type=([^&$]+)/.exec(location.hash)[1]:null,a),Object.preventExtensions(this)}Object.preventExtensions(LogViewer),window.addEventListener("error",function(a){log.error(JSON.stringify(a))});var logViewer=null;document.addEventListener("DOMContentLoaded",function(){logViewer=new LogViewer});